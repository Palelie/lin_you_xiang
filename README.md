# 邻优享APP



#### 项目介绍：

本项目是基于 Spring Boot + Redis + Mysql + RabbitMQ + MyBatis Plus 实现的 商铺服务 + 博客分享 APP



#### 功能介绍：

1. 分布式单点登录
2. 附近商铺查询
3. 优惠券定时秒杀抢购
4. 用户博客分享发布
5. 博客点赞排行
6. 热评查看
7. 粉丝关注与动态信息 feed 流滚动分页推送
8. 用户签到与连续签到统计



#### 项目特色：

1. 短信登录：使用 Redis + Token 机制实现**单点登录**；实现分布式 Session，解决**集群间登录态同步**问题；采用多重拦截器实现**用户令牌刷新**；使用 Hash 代替 String 来存储用户信息，节约了内存并便于单字段的修改

2. 店铺查询：使用 Redis 对高频访问店铺进行缓存，降低 DB 压力同时提升 90% 的数据查询性能
3. 为方便其他业务后续使用缓存，使用**泛型 + 函数式编程**实现了**通用缓存访问静态方法**，并解决了**缓存穿透、缓存雪崩、缓存击穿**等问题

4. 优惠券秒杀：使用 **Redis + Lua 脚本**实现**库存预检**，解决了超卖问题、实现一人一单，并通过 **RabbitMQ** 路由模式实现订单的**异步创建**。实现相比使用 **乐观锁 + redisson分布式锁** 的数据库实现，秒杀性能提高了 300%

5. 通过 RabbitMQ 在订单发送模块中加入**异步消息发布确认**来处理发送失败的消息，并在订单入库模块加入**死信队列**处理溢出、超时等异常消息，保证了**订单消息的可靠传递**

6. 使用 **RabbitMQ 延迟队列**，实现用户订单付款超时后进行**库存回退和订单销毁**，并且基于插件实现，避免出现消息堵塞情况

7. 使用 SortedSet 数据结构存储用户点赞信息，并基于 **ZSet** 实现 TopN **点赞排行**功能，实测相对于 DB 查询性能提升 250%

8. 使用 Set 数据结构实现用户关注、**共同关注**功能

9. 在系统用户量不大的前提下，基于**推模式**实现**关注 Feed 流**，保证了新点评消息的及时可达，并减少用户访问的等待时间

10. 使用 Geo 数据结构分类存储附近商户，并使用 Geo Search 命令实现高性能**商户查询及按距离排序**
11. 使用 BitMap 实现用户**连续签到**统计功能，相对于传统关系库存储，节约近30倍的内存空间
12. 使用 HyperLogLog 数据结构实现UV统计



